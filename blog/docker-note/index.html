<!DOCTYPE html><html lang="en" class="dark"> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.11.0"><!-- Font preloads --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet"><!-- Canonical URL --><link rel="canonical" href="https://yangxuewu.com/blog/docker-note/"><!-- Primary Meta Tags --><title>我的 docker 笔记 | Simon Y.</title><meta name="title" content="我的 docker 笔记"><meta name="description" content=""><meta name="author" content="Simon Y."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://yangxuewu.com/blog/docker-note/"><meta property="og:title" content="我的 docker 笔记"><meta property="og:description" content=""><meta property="og:image" content="https://yangxuewu.com/og-image/docker-note.png"><meta property="article:author" content="Simon Y."><meta property="article:published_time" content="2022-02-21T00:00:00.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://yangxuewu.com/blog/docker-note/"><meta property="twitter:title" content="我的 docker 笔记"><meta property="twitter:description" content=""><meta property="twitter:image" content="https://yangxuewu.com/og-image/docker-note.png"><link rel="stylesheet" href="/_astro/about.Tfa2nFZT.css">
<link rel="stylesheet" href="/_astro/about.CoeDIuRf.css">
<style>li[data-astro-cid-zekvapgs]:before{content:"#";margin-right:-.5rem;color:var(--theme-accent)}.active-toc[data-astro-cid-zekvapgs]{color:var(--theme-accent)}
button[data-astro-cid-xuhzuiaq]{position:fixed;bottom:1rem;left:82%;display:none;height:3rem;width:3rem;align-items:center;justify-content:center;border-radius:9999px;background-color:var(--theme-accent);color:var(--theme-bg);--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}button[data-astro-cid-xuhzuiaq]:hover{--tw-scale-x: 1.25;--tw-scale-y: 1.25;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}@media (min-width: 640px){button[data-astro-cid-xuhzuiaq]{bottom:2rem;height:2.5rem;width:2.5rem}}@media (min-width: 768px){button[data-astro-cid-xuhzuiaq]{left:90%}}@media (min-width: 1536px){button[data-astro-cid-xuhzuiaq]{left:75%}}
</style><script type="module" src="/_astro/hoisted.DWBFCYtM.js"></script></head> <body> <header class="group relative mb-8 flex justify-between items-center gap-4" id="main-header" data-astro-cid-3ef6ksr2> <div class="block" data-astro-cid-3ef6ksr2> <a class="title whitespace-nowrap" href="/" data-astro-cid-3ef6ksr2>Simon Y.</a> </div> <nav class="mt-4 bg-surface/95 sm:bg-bgColor absolute hidden top-8 w-full sm:block sm:static sm:mt-0 group-[.menu-open]:z-50 group-[.menu-open]:flex group-[.menu-open]:bg-bgColor" id="navigation-menu" aria-label="main menu" data-astro-cid-3ef6ksr2> <div class="space-y-1 px-2 pb-3 pt-2 sm:flex sm:px-0 sm:py-0 sm:space-y-0 sm:space-x-2" data-astro-cid-3ef6ksr2> <a href="/" class="block py-2 sm:py-0" title="Home" data-astro-prefetch data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Home </a> <a href="/blog" class="block py-2 sm:py-0" title="Blog" data-astro-prefetch data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blog </a> <a href="/books" class="block py-2 sm:py-0" title="Books" data-astro-prefetch data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Books </a> <a href="/archive" class="block py-2 sm:py-0" title="Archive" data-astro-prefetch data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Archive </a> <a href="/about" class="block py-2 sm:py-0" title="About" data-astro-prefetch data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> About </a>  <a href="/tags" class="sm:hidden block py-2 sm:py-0" title="tags" data-astro-prefetch data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Tags </a>  <a href="/series" class="sm:hidden block py-2 sm:py-0" title="series" data-astro-prefetch data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Series </a>  </div> </nav> <div class="flex gap-2 items-center justify-center" data-astro-cid-3ef6ksr2> <button id="themeToggle" class="transition-all relative" aria-label="toggle theme" data-astro-cid-x3pjskd3> <svg width="25px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-astro-cid-x3pjskd3> <path class="sun opacity-100 transition-all dark:scale-0 dark:opacity-0" fill-rule="evenodd" d="M12 17.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zm0 1.5a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm12-7a.8.8 0 0 1-.8.8h-2.4a.8.8 0 0 1 0-1.6h2.4a.8.8 0 0 1 .8.8zM4 12a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1 0-1.6h2.5a.8.8 0 0 1 .8.8zm16.5-8.5a.8.8 0 0 1 0 1l-1.8 1.8a.8.8 0 0 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM6.3 17.7a.8.8 0 0 1 0 1l-1.7 1.8a.8.8 0 1 1-1-1l1.7-1.8a.8.8 0 0 1 1 0zM12 0a.8.8 0 0 1 .8.8v2.5a.8.8 0 0 1-1.6 0V.8A.8.8 0 0 1 12 0zm0 20a.8.8 0 0 1 .8.8v2.4a.8.8 0 0 1-1.6 0v-2.4a.8.8 0 0 1 .8-.8zM3.5 3.5a.8.8 0 0 1 1 0l1.8 1.8a.8.8 0 1 1-1 1L3.5 4.6a.8.8 0 0 1 0-1zm14.2 14.2a.8.8 0 0 1 1 0l1.8 1.7a.8.8 0 0 1-1 1l-1.8-1.7a.8.8 0 0 1 0-1z" data-astro-cid-x3pjskd3></path> <path class="moon opacity-0 transition-all dark:scale-100 dark:opacity-100" fill-rule="evenodd" d="M16.5 6A10.5 10.5 0 0 1 4.7 16.4 8.5 8.5 0 1 0 16.4 4.7l.1 1.3zm-1.7-2a9 9 0 0 1 .2 2 9 9 0 0 1-11 8.8 9.4 9.4 0 0 1-.8-.3c-.4 0-.8.3-.7.7a10 10 0 0 0 .3.8 10 10 0 0 0 9.2 6 10 10 0 0 0 4-19.2 9.7 9.7 0 0 0-.9-.3c-.3-.1-.7.3-.6.7a9 9 0 0 1 .3.8z" data-astro-cid-x3pjskd3></path> </svg> </button>  <script>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme');
    }
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      return 'dark';
    }
      return 'light';
  })();

  if (theme === 'light') {
    document.documentElement.classList.remove('dark');
  } else {
    document.documentElement.classList.add('dark');
  }

  window.localStorage.setItem('theme', theme);

  const handleToggleClick = () => {
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  }

  document.getElementById("themeToggle").addEventListener("click", handleToggleClick);
</script> <nav-button data-astro-cid-3ef6ksr2> <div class="sm:hidden" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>open main menu</span> <button class="group flex items-center justify-center" type="button" id="navigation-menu-btn" aria-label="Open main menu" aria-expanded="false" aria-haspopup="menu" data-astro-cid-3ef6ksr2> <!-- icon when menu is closed --> <svg class="transform transition-all duration-150 ease-out group-aria-expanded:scale-0 group-aria-expanded:opacity-0 h-6 w-6 block group-aria-expanded:hidden" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-astro-cid-3ef6ksr2> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" data-astro-cid-3ef6ksr2></path> </svg> <!-- icon when menu is open --> <svg class="transform transition-all duration-150 ease-out h-6 w-6 scale-0 text-accent opacity-0 transition-all group-aria-expanded:scale-100 group-aria-expanded:opacity-100 hidden group-aria-expanded:block" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-astro-cid-3ef6ksr2> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" data-astro-cid-3ef6ksr2></path> </svg> </button> </div> </nav-button> </div> </header>   <main class="grid grid-cols-1 gap-y-16 sm:grid-cols-[3fr_1fr] sm:gap-x-4">  <article class="cody-bg prose dark:prose-invert prose-cody text-textColor max-w-4xl"> <header class="space-y-2"> <div class="aspect-h-9 aspect-w-16 mb-6 w-full flex justify-center"> <img src="" alt="" class="m-0"> </div> <div class="md:sr-only not-sr-only"> <span>Part of series:</span> <a class="cody-link" href="/series/tech">tech</a> </div> <div class="flex gap-2 items-center"> <h1 class="text-3xl my-0">我的 docker 笔记</h1>  </div> <span class="font-semibold text-textColor flex gap-2 items-center"> <time datetime="2022-02-21T00:00:00.000Z" title="21 February 2022"> 21 February 2022 </time> <span>
/ 13 min read </span>  </span> <ul class="not-prose flex gap-2 flex-wrap"> <svg viewBox="0 0 32 32" aria-hidden="true" focusable="false" class="w-5 h-5" astro-icon="carbon:tag-group"><circle cx="10" cy="14" r="2" fill="currentColor"/><path fill="currentColor" d="M16 30a1 1 0 0 1-.71-.29L4.59 19A2 2 0 0 1 4 17.59V10a2 2 0 0 1 2-2h7.59a2 2 0 0 1 1.41.59l10.71 10.7a1 1 0 0 1 0 1.42l-9 9A1 1 0 0 1 16 30zM6 10v7.59l10 10L23.59 20l-10-10z"/><path fill="currentColor" d="M27.71 13.29 17 2.59A2 2 0 0 0 15.59 2H8a2 2 0 0 0-2 2v2h2V4h7.59l10 10-1.3 1.29 1.42 1.42 2-2a1 1 0 0 0 0-1.42z"/></svg> <li class="tag"> <a href="/tags/docker">docker</a> </li><li class="tag"> <a href="/tags/linux">linux</a> </li><li class="tag"> <a href="/tags/note">note</a> </li> </ul> </header> <hr class="my-4"> <main class="prose-sm prose-headings:font-semibold prose-headings:ml-4 prose-headings:before:absolute prose-headings:before:-ms-4 prose-headings:before:text-accent prose-headings:before:content-['#'] prose-th:before:content-none prose-a:text-accent">  <blockquote>
<p>这是一篇旧的 dokcer 笔记，大部分内容是基于 <a href="https://docs.docker.com/desktop/windows/install/">Docker Desktop for Windows</a> 写的，但也适用于其他平台。</p>
</blockquote>
<h2 id="安装-docker-先决条件">安装 Docker 先决条件</h2>
<ul>
<li>64 位系统</li>
<li>Linux 内核大于 3.8</li>
<li>内核必须支持并开启 cgroup 和命名空间（namespace）</li>
</ul>
<h2 id="在-ubuntu-和-debian-中安装-docker">在 Ubuntu 和 Debian 中安装 Docker</h2>
<blockquote>
<p>安装时还是参考<a href="https://docs.docker.com/engine/install/ubuntu/">官网</a>，这部分的笔记是很久之前记录的，现在可能已经不能使用了，但是还是保留下来，做个记录吧。</p>
</blockquote>
<ol>
<li>检查内核版本</li>
</ol>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">uname</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -a</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>升级系统到最新</li>
</ol>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">#  检查更新</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> apt</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> update</span></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">#  安装内核</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> apt</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> install</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> linux-headers-x.xx.x-xx-generic</span></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">#  加载新内核</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> update-grub</span></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">#  重启</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> reboot</span></span>
<span class="line"></span></code></pre>
<ol start="3">
<li>检查 Device Mapper 存储驱动</li>
</ol>
<p>检查 Device Mapper</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">ls</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -l</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> /sys/class/misc/device-mapper</span></span>
<span class="line"></span></code></pre>
<p>在 /proc/devices 文件中检查是否有 device-mapper 条目</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> grep</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> device-mapper</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> /proc/devices</span></span>
<span class="line"></span></code></pre>
<p>如果无 device-mapper 相关信息，尝试加载 dm_mod 模块</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> modprode</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> dm_mod</span></span>
<span class="line"></span></code></pre>
<ol start="4">
<li>安装 Docker</li>
</ol>
<p>（1） Install packages to allowapt to use a repository over HTTPS:</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> apt-get</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> install</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB"> \</span></span>
<span class="line"><span style="color:#A6E3A1;--shiki-dark:#40A02B">  apt-transport-https</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB"> \</span></span>
<span class="line"><span style="color:#A6E3A1;--shiki-dark:#40A02B">  ca-certificates</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB"> \</span></span>
<span class="line"><span style="color:#A6E3A1;--shiki-dark:#40A02B">  curl</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB"> \</span></span>
<span class="line"><span style="color:#A6E3A1;--shiki-dark:#40A02B">  software-properties-common</span></span>
<span class="line"></span></code></pre>
<p>（2） Add Docker’s official GPG key:</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">curl</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -fsSLhttps://download.docker.com/linux/ubuntu/gpg</span><span style="color:#94E2D5;--shiki-dark:#179299"> |</span><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic"> sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> apt-key</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> add</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -</span></span>
<span class="line"></span></code></pre>
<p>Verify fingerprint</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> apt-key</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> fingerprint</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 0EBFCD88</span></span>
<span class="line"></span></code></pre>
<p>（3）use stable repository</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> add-apt-repository</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB"> \</span></span>
<span class="line"><span style="color:#A6E3A1;--shiki-dark:#40A02B">  "deb [arch=amd64] https://download.docker.com/linux/ubuntu</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\</span></span>
<span class="line"><span style="color:#9399B2;--shiki-dark:#7C7F93">  $(</span><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">lsb_release</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -cs</span><span style="color:#9399B2;--shiki-dark:#7C7F93">)</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB"> \</span></span>
<span class="line"><span style="color:#A6E3A1;--shiki-dark:#40A02B">  stable"</span></span>
<span class="line"></span></code></pre>
<p>（4）安装 Docker 软件包</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> apt</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> install</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> docker-engine</span></span>
<span class="line"></span></code></pre>
<p>（5）确认 Docker 应正常安装并运行</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> info</span></span>
<span class="line"></span></code></pre>
<ol start="5">
<li>Docker 中使用 UFW(Uncomplicated Firewall)</li>
</ol>
<p>修改 /etc/default/ufw 文件</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">#  原始</span></span>
<span class="line"><span style="color:#CDD6F4;--shiki-dark:#4C4F69">DEFAULT_FORWARD_POLICY</span><span style="color:#94E2D5;--shiki-dark:#179299">=</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">"DROP"</span></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">#  修改为</span></span>
<span class="line"><span style="color:#CDD6F4;--shiki-dark:#4C4F69">DEFAULT_FORWARD_POLICY</span><span style="color:#94E2D5;--shiki-dark:#179299">=</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">"ACCEPT"</span></span>
<span class="line"></span></code></pre>
<p>重新加载 UFW 防火墙</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">sudo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> ufw</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> reload</span></span>
<span class="line"></span></code></pre>
<h2 id="docker-常用命令">docker 常用命令</h2>
<p>列出本机所有 image 文件</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> image</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> ls</span></span>
<span class="line"></span></code></pre>
<p>删除 image 文件</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> image</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> rm</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> [imageName]</span></span>
<span class="line"></span></code></pre>
<p>列出本机正在运行的容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> ls</span></span>
<span class="line"></span></code></pre>
<p>列出本机所有容器，包括终止运行的容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> ls</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --all</span></span>
<span class="line"></span></code></pre>
<p>终止运行容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> kill</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> [containerId]</span></span>
<span class="line"></span></code></pre>
<p>删除容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> rm</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> [containerId]</span></span>
<span class="line"></span></code></pre>
<p>启动容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> start</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> containerId</span></span>
<span class="line"></span></code></pre>
<p>停止运行容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> stop</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> containerId</span></span>
<span class="line"></span></code></pre>
<p>查看容器输出</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> logs</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> containerId</span></span>
<span class="line"></span></code></pre>
<p>进入正在运行的容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> exec</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -it</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> constainerId</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> /bin/bash</span></span>
<span class="line"></span></code></pre>
<p>从正在运行的容器里将文件拷贝到本机</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> cp</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> constainerId:</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">/path/to/fil</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">e</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> .</span></span>
<span class="line"></span></code></pre>
<h2 id="dockerfile-文件">Dockerfile 文件</h2>
<p>Dockerfile 是一个用来配置生成 image 文件的文本文件。</p>
<p><code>.dockerignore</code> 文件写入要排除在 image 文件外的文件/文件夹。</p>
<p>Dockerfile 文件内容示例：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">FROM</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> node:8.4</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">COPY</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> . /app</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">WORKDIR</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> /app</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">RUN</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> [</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">"npm"</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">, </span><span style="color:#A6E3A1;--shiki-dark:#40A02B">"install"</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">]</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">EXPOSE</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> 3000/tcp</span></span>
<span class="line"></span></code></pre>
<ul>
<li>FROM node:8.4 ---> image 文件继承的 image，冒号表示继承 image 的标签</li>
<li>COPY . /app ---> 将当前目录下除 .dockerignore 排除的路径的所有文件，都拷贝到 image 的 /app 目录</li>
<li>WORKDIR /app ---> 指定接下来的工作路径为 /app</li>
<li>RUN [“npm”, “install”] ---> 在 /app 目录下运行 npm install 安装依赖。安装后所有依赖都将打包到 image 文件</li>
<li>EXPOSE 3000/tcp ---> 将容器 3000 端口暴露出来</li>
</ul>
<p>创建 image 文件</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> image</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> build</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -t</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> [imageName]</span><span style="color:#9399B2;--shiki-dark:#7C7F93">[</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">:tag</span><span style="color:#9399B2;--shiki-dark:#7C7F93">]</span><span style="color:#9399B2;--shiki-dark:#7C7F93"> [</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">fileDir</span><span style="color:#9399B2;--shiki-dark:#7C7F93">]</span></span>
<span class="line"></span></code></pre>
<p><code>-t</code> 参数用来指定 image 文件名，文件名后的 <code>:tag</code> 为 image 指定标签，如果不指定，默认为 <code>latest</code>，fileDir 表示 Dockerfile 所在路径，当前路径就是一个点。</p>
<p>如果运行成功，通过 docker image ls  查看新生成的 image 文件。</p>
<p>生成容器</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> run</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -p</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 8000:3000</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -it</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> imageName[:tag]</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> /bin/bash</span></span>
<span class="line"></span></code></pre>
<ul>
<li>-p : 容器的 3000 端口映射到本机的 8000 端口</li>
<li>-it : 容器的 shell 映射到当前的 shell，在本机窗口输入命令会传入容器</li>
<li>imageName[:tag] : image 文件名[:标签]</li>
<li>/bin/bash : 容器启动以后，内部第一个指定的命令，这里是启动 bash，保证用户能够使用 shell</li>
</ul>
<p>CMD 命令</p>
<p>在 Dockerfile 中添加 CMD 命令，让容器启动后自动执行命令</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">FROM</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> node:8.4</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">COPY</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> . /app</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">WORKDIR</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> /app</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">RUN</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> [</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">"npm"</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">, </span><span style="color:#A6E3A1;--shiki-dark:#40A02B">"install"</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">]</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">EXPOSE</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> 3000/tcp</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">CMD</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> node demos/01.js</span></span>
<span class="line"></span></code></pre>
<p>RUN 命令与 CMD 命令的区别：</p>
<p>RUN 命令在 image 文件构建阶段执行，执行结果打包进入 image 文件；CMD 命令在容器启动后执行。一个 Dockerfile 可以包含多个 RUN 命令，但只能有一个 CMD 命令。</p>
<p>指定了 CMD 命令后，docker container run 命令就不能附加命令了（比如 /bin/bash），否则会覆盖 CMD 命令。</p>
<p>发布 image 文件</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> image</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> tag</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> imageName</span><span style="color:#94E2D5;--shiki-dark:#179299"> &#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">usernam</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">e</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">/</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">repositor</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">y</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">[:</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ta</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">g</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">]</span></span>
<span class="line"></span></code></pre>
<p>或</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> image</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> build</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -t</span><span style="color:#94E2D5;--shiki-dark:#179299"> &#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">usernam</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">e</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">/</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">repositror</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">y</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">[:</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ta</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">g</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">]</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> .</span></span>
<span class="line"></span></code></pre>
<p>发布 image 文件</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> image</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> push</span><span style="color:#94E2D5;--shiki-dark:#179299"> &#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">usernam</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">e</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">/</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">repositor</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">y</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">[:</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ta</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">g</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B">]</span></span>
<span class="line"></span></code></pre>
<h2 id="docker-安装-mysql-及-通过-nodejs-连接数据库">docker 安装 mysql 及 通过 nodejs 连接数据库</h2>
<p>1、安装</p>
<p>以 5.7 为例：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> pull</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mysql:5.7</span></span>
<span class="line"></span></code></pre>
<p>2、创建 mysql 数据库文件存放目录</p>
<p>因为 docker 容器不保存数据，管理容器数据也就没有了，所以必须要设置数据存储目录，把数据存在本地磁盘上。例：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">mkdir</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> D:</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ocker</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\m</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ysql</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">mkdir</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> D:</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ocker</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\m</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ysqlConf</span></span>
<span class="line"></span></code></pre>
<p>3、启动 mysql 镜像</p>
<p>打开 powershell，执行如下命令：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> run</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --rm</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --name</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> Mysql</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -v</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> D:</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ocker</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\m</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ysql:/var/lib/mysql</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -v</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> D:</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ocker</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\m</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ysqlConf:/etc/mysql/conf.d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e MYSQL_ROOT_PASSWORD=123456</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -p</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 3306:3306</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mysql:5.7</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --character-set-server=utf8mb4</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --collation-server=utf8mb4_unicode_ci</span></span>
<span class="line"></span></code></pre>
<p>说明：</p>
<ul>
<li>-d：后台运行</li>
<li>—rm：停止镜像自动删除镜像，如果配置好可以不删除，Windows 最新使用 Dashboard 管理容器，UI 界面会很方便，配置好后不删除。并且  Windows  下使用  Docker Desktop  时使用  Kitematic  管理镜像启停很方便，配置之后就不用删除了。</li>
<li>—name：镜像别名</li>
<li>-v：把本地目录映射到镜像目录</li>
<li>-e：设置环境变量，通过  docker  安装的  mysql  必须设置 MYSQL_ROOT_PASSWORD，否则不能运行。</li>
<li>-p：把本地端口映射到镜像端口，这里最好一致，否则可能有无法连接的问题</li>
<li>—character-set-server  和 —collation-server  设置  mysql  编码，以便识别中文。</li>
</ul>
<p>4、添加远程访问账户</p>
<del>
  打开 Kitematic  点击运行中的  mysql  镜像，点击  EXEC
  图标，弹出命令行界面，输入下面的命令：
</del>
<p><del>mysql -u root -p</del></p>
<p>Linux 输入：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> container</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> exec</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -it</span><span style="color:#94E2D5;--shiki-dark:#179299"> &#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">containerI</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">d</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> /bin/bash</span></span>
<span class="line"></span></code></pre>
<p>再输入 <code>mysql -u root -p</code></p>
<p>按照提示输入 <code>root</code> 密码。</p>
<p>创建一个新用户：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">-- 创建一个用于本地访问的用户</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">CREATE</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> USER</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> '</span><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">username</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">'@</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">'localhost'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> IDENTIFIED </span><span style="color:#CBA6F7;--shiki-dark:#8839EF">BY</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'password'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">;</span></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">-- 创建一个所有网络均可访问的用户</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">CREATE</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> USER</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> '</span><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">username</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">'@</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">'%'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> IDENTIFIED </span><span style="color:#CBA6F7;--shiki-dark:#8839EF">BY</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'password'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">;</span></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">-- 创建一个指定 IP 访问的用户</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">CREATE</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> USER</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> '</span><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">username</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">'@</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">'IP'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> IDENTIFIED </span><span style="color:#CBA6F7;--shiki-dark:#8839EF">BY</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'password'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">;</span></span>
<span class="line"></span></code></pre>
<p>设置新用户权限：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="sql"><code><span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">GRANT</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> ALL PRIVILEGES </span><span style="color:#CBA6F7;--shiki-dark:#8839EF">ON</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> _._ </span><span style="color:#CBA6F7;--shiki-dark:#8839EF">TO</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'username'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">@</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">'%'</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> WITH</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> GRANT</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> OPTION</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">;</span></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">-- 授予用户 testDb 内所有表的所有权限</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">GRANT</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> ALL PRIVILEGES </span><span style="color:#CBA6F7;--shiki-dark:#8839EF">ON</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> testDb.</span><span style="color:#94E2D5;--shiki-dark:#179299">*</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> TO</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'username'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">@</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">'%'</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> WITH</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> GRANT</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> OPTION</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">;</span></span>
<span class="line"><span style="color:#CBA6F7;--shiki-dark:#8839EF">GRANT</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> ALL PRIVILEGES </span><span style="color:#CBA6F7;--shiki-dark:#8839EF">ON</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> testDb.</span><span style="color:#94E2D5;--shiki-dark:#179299">*</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> TO</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'username'</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">@</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">'localhost'</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> WITH</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> GRANT</span><span style="color:#CBA6F7;--shiki-dark:#8839EF"> OPTION</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6C7086;--shiki-dark:#9CA0B0;font-style:italic;--shiki-dark-font-style:italic">-- 刷新用户权限</span></span>
<span class="line"><span style="color:#CDD6F4;--shiki-dark:#4C4F69">FLUSH PRIVILEGES;</span></span>
<span class="line"></span></code></pre>
<p>5、通过 nodejs 的 mysql2 模块连接数据库</p>
<p>mysql2 用法查看 <a href="https://www.npmjs.com/package/mysql2">npm 文档</a>。</p>
<p>连接过程中，如果出现以下错误：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">Client</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> does</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> not</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> support</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> authentication</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> protocol</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> requested</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> by</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> server</span><span style="color:#9399B2;--shiki-dark:#7C7F93">;</span><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic"> consider</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> upgrading</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> MySQL</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> client</span></span>
<span class="line"></span></code></pre>
<p>按照如下方法解决：</p>
<p><del>在 Kitematic  界面点击  EXEC  进入命令行，然后登录：</del></p>
<p><code>mysql -u root -p</code></p>
<p>然后执行以下命令：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">ALTER</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> USER</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'root'@'%'</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> IDENTIFIED</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> WITH</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mysql_native_password</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> BY</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'your_root_password'</span><span style="color:#9399B2;--shiki-dark:#7C7F93">;</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">ALTER</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> USER</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'root'@'localhost'</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> IDENTIFIED</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> WITH</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mysql_native_password</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> BY</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'your_root_password'</span><span style="color:#9399B2;--shiki-dark:#7C7F93">;</span></span>
<span class="line"></span></code></pre>
<p>再执行以下命令查看是否设置成功，最后再尝试连接。</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">SELECT</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> plugin</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> FROM</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mysql.user</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> WHERE</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> User</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> =</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'root'</span><span style="color:#9399B2;--shiki-dark:#7C7F93">;</span></span>
<span class="line"></span></code></pre>
<p>6、通过 mysql2 获取数据</p>
<p>mysql2 支持 promise，获取的数据是一个数据集，如果要获取数据表，只需要取数据集的第一张表（也就是索引为 0  的表）即可。</p>
<p>如果要获取一个数据表中数据行数，在使用 COUNT(*)  时最好设置一个别名，否则后续处理数据时会比较麻烦。</p>
<p>mysql2  的  query  方法的第一个参数是 SQL 语句，SQL 语句传入的变量可以用 <code>?</code> 作为占位符，第二个参数即是传给 SQL 语句变量的参数。</p>
<h2 id="docker-无法打开端口">docker 无法打开端口</h2>
<p>第一步</p>
<p>Disable hyper-v (which will required a couple of restarts)
dism.exe /Online /Disable-Feature:Microsoft-Hyper-V</p>
<p>第二步</p>
<p>When you finish all the required restarts, reserve the port you want so hyper-v doesn’t reserve it back
netsh int ipv4 add excludedportrange protocol=tcp startport=50051 numberofports=1</p>
<p>第三步</p>
<p>Re-Enable hyper-V (which will require a couple of restart)
dism.exe /Online /Enable-Feature:Microsoft-Hyper-V /All</p>
<h2 id="docker-安装-jupyter-镜像容器">docker 安装 jupyter 镜像容器</h2>
<ol>
<li>拉取镜像</li>
</ol>
<p>以 minimal-notebook 镜像为例。</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> pull</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> jupyter/minimal-notebook:latest</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>运行容器</li>
</ol>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> run</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --rm</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --name</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> Myjupyter</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -v</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> D:</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\J</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">upyter</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\w</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ork:/home/jovyan/work</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -p</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 8888:8888</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> JUPYTER_ENABLE_LAB=yes </span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> jupyter/minimal-notebook:latest</span></span>
<span class="line"></span></code></pre>
<ol start="3">
<li>所有配置项</li>
</ol>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> run</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --rm</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --name</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> Myjupyter</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --user</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> root</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> NB_USER=xuewu</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> NB_UID=</span><span style="color:#FAB387;--shiki-dark:#FE640B">1000</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> NB_GID=</span><span style="color:#FAB387;--shiki-dark:#FE640B">100</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> NB_GROUP=</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">$NB_USER </span><span style="color:#A6E3A1;--shiki-dark:#40A02B">-e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> CHOWN_HOME=yes</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> GRANT_SUDO=yes</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> RESTARTABLE=yes  -w</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> /home/</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">$NB_USER </span><span style="color:#A6E3A1;--shiki-dark:#40A02B">-v</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> D:</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\J</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">upyter</span><span style="color:#F5C2E7;--shiki-dark:#EA76CB">\w</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">ork:/home/xuewu/work</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -p</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 8888:8888</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -e</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> JUPYTER_ENABLE_LAB=yes  jupyter/minimal-notebook:latest</span></span>
<span class="line"></span></code></pre>
<h2 id="docker-部署-mongodb">docker 部署 mongodb</h2>
<ol>
<li>创建一个 volume</li>
</ol>
<p>volume 的作用是用来存储数据，因为 windows 下 docker 功能限制，不能使用路径挂载的方式将数据库文件挂载到本地磁盘，因此只能使用这种方式。</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> volume</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> create</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --name=</span><span style="color:#9399B2;--shiki-dark:#7C7F93">[</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">Your-volume-name</span><span style="color:#9399B2;--shiki-dark:#7C7F93">]</span></span>
<span class="line"></span></code></pre>
<ol start="2">
<li>运行 mongo 容器</li>
</ol>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> run</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --name</span><span style="color:#94E2D5;--shiki-dark:#179299"> &#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">mongodb-nam</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">e</span><span style="color:#94E2D5;--shiki-dark:#179299">></span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -p</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 27017:27017</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -v </span><span style="color:#9399B2;--shiki-dark:#7C7F93">[</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">Your-volume-name</span><span style="color:#9399B2;--shiki-dark:#7C7F93">]</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">:/data/db</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongo</span><span style="color:#94E2D5;--shiki-dark:#179299">&#x3C;</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">:versio</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">n</span><span style="color:#94E2D5;--shiki-dark:#179299">></span></span>
<span class="line"></span></code></pre>
<p>—name:  数据库名字，不加参数则使用随机名</p>
<p>-p:  端口，前面是计算机端口，后面是容器上的端口</p>
<p>-v:  数据库目录，冒号前是创建的  volume  名，冒号后是容器上的路径</p>
<p>-d:  在后台运行</p>
<p>mongo:  镜像，后加版本号，不加版本号默认是  latest，最好制定版本号</p>
<ol start="3">
<li>创建管理员：</li>
</ol>
<p>要为 mongodb 加入登录验证，就需要创建登录用户名和密码。</p>
<p>进入  mongo  命令行:</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> exec</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -it </span><span style="color:#9399B2;--shiki-dark:#7C7F93">[</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">mongodb-name</span><span style="color:#9399B2;--shiki-dark:#7C7F93">]</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> bash</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">mongo</span></span>
<span class="line"></span></code></pre>
<p>进入数据库：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">use</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> database-name</span></span>
<span class="line"></span></code></pre>
<p>执行以下命令：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">db.createUser(</span><span style="color:#A6E3A1;--shiki-dark:#40A02B">{</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> user:</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> '&#x3C;USER>',</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> pwd:</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> '&#x3C;PASSWORD>',</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> roles:</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69"> [ </span><span style="color:#A6E3A1;--shiki-dark:#40A02B">{</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> role:</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'readWrite',</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> db:</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 'database-name'</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> }</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> ]}</span><span style="color:#CDD6F4;--shiki-dark:#4C4F69">)</span><span style="color:#9399B2;--shiki-dark:#7C7F93">;</span></span>
<span class="line"></span></code></pre>
<p>将 <code>&#x3C;USER></code> 和 <code>&#x3C;PASSWORD></code> 内容替换成自己需要的用户名和密码。</p>
<p>退出命令行，停止并移除当前容器，然后重新以验证方式开启一个新容器：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> stop</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongodb-name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> rm</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongodb-name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> run</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --name</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongodb-name</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -v</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongodata:/data/db</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -p</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> 27017:27017</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongo</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --auth</span></span>
<span class="line"></span></code></pre>
<ol start="4">
<li>以验证方式连接数据库</li>
</ol>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">mongodb://user:password@localhost:27017/database-name</span></span>
<span class="line"></span></code></pre>
<ol start="5">
<li>导入数据</li>
</ol>
<p>首先将数据集 json 或 bson 文件复制到 mongo 容器中：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> cp</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> a.json</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongodb-name:/path</span></span>
<span class="line"></span></code></pre>
<p>a.json 的位置可以写入一个 json 或 bson 文件，或者是一个路径，这样就能复制一整个路径下的文件。</p>
<p>path 是复制到 mongo 容器中的路径，自己新建一个路径，防止导入的文件弄乱容器目录，也方便下一步数据导入。</p>
<p>复制完数据后，进入 docker 命令行：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> exec</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -it</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mongodb-name</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> bash</span></span>
<span class="line"></span></code></pre>
<p>之后，进入复制 json 文件路径，执行 mongorestore 命令：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">mongorestore</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> -d</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> database-name</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> ./</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --username=user</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --password=password</span></span>
<span class="line"></span></code></pre>
<p>mongorestore 官方指南： <a href="https://docs.mongodb.com/manual/reference/program/mongorestore/">https://docs.mongodb.com/manual/reference/program/mongorestore/</a></p>
<h2 id="docker--wordpress-微服务">Docker + WordPress 微服务</h2>
<p><a href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html">http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html</a></p>
<h2 id="docker-compose">Docker Compose</h2>
<p>Compose 是一个用于管理多个 Docker 容器组成一个应用的工具。</p>
<p>Compose 配置文件是 YAML 格式的 docker-compose.yml。</p>
<p>写好多个容器之间的调用关系 .yml 配置文件后，只需要一个命令，就能同时启动/关闭这些容器。</p>
<p>Mac 和 Windows 在安装 docker 的时候，会一起安装 docker compose。Linux 系统下的安装参考官方文档。</p>
<p>安装完成后，运行命令查询：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker-compose</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> --version</span></span>
<span class="line"></span></code></pre>
<p>compose wordpress 示例 yml</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="yml"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">mysql</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  image</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mysql:5.7</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  environment</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span></span>
<span class="line"><span style="color:#9399B2;--shiki-dark:#7C7F93">    -</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> MYSQL_ROOT_PASSWORD=123456</span></span>
<span class="line"><span style="color:#9399B2;--shiki-dark:#7C7F93">    -</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> MYSQL_DATABASE=wordpress</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">web</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  image</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> wordpress</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  links</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span></span>
<span class="line"><span style="color:#9399B2;--shiki-dark:#7C7F93">    -</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> mysql</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  environment</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span></span>
<span class="line"><span style="color:#9399B2;--shiki-dark:#7C7F93">    -</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> WORDPRESS_DB_PASSWORD=123456</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  ports</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span></span>
<span class="line"><span style="color:#9399B2;--shiki-dark:#7C7F93">    -</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> '127.0.0.3:8080:80'</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  working_dir</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> /var/www/html</span></span>
<span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5">  volumes</span><span style="color:#94E2D5;--shiki-dark:#179299">:</span></span>
<span class="line"><span style="color:#9399B2;--shiki-dark:#7C7F93">    -</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> wordpress:/var/www/html</span></span>
<span class="line"></span></code></pre>
<p>启动两个容器：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker-compose</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> up</span></span>
<span class="line"></span></code></pre>
<p>关闭两个容器：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker-compose</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> stop</span></span>
<span class="line"></span></code></pre>
<p>关闭后，两个容器还在，数据不会丢失，下次启动时，还可以复用。</p>
<p>删除容器文件（容器必须已经停止）：</p>
<pre class="astro-code astro-code-themes catppuccin-mocha catppuccin-latte" style="background-color:#1e1e2e;--shiki-dark-bg:#eff1f5;color:#cdd6f4;--shiki-dark:#4c4f69; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#89B4FA;--shiki-dark:#1E66F5;font-style:italic;--shiki-dark-font-style:italic">docker-compose</span><span style="color:#A6E3A1;--shiki-dark:#40A02B"> rm</span></span>
<span class="line"></span></code></pre>
<h2 id="mysql-网页客户端-docker-容器---adminer">MySQL 网页客户端 Docker 容器 - Adminer</h2>  </main> <button id="back-to-top-btn" aria-label="back to top" class="z-50" data-astro-cid-xuhzuiaq> <svg viewBox="0 0 32 32" aria-hidden="true" focusable="false" data-astro-cid-xuhzuiaq class="w-7 h-7 sm:w-5 s:h-6" astro-icon="carbon:arrow-up"><path fill="currentColor" d="M16 4 6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14 16 4z"/></svg> </button>   </article>   <aside class="hidden sm:block"> <div class="flex flex-col space-y-2"> <h2 class="font-semibold text-lg text-textColor">Simon Y.</h2> <p>Reading, writing, and learning.</p> <div class="flex flex-wrap items-end gap-x-4"> <ul class="flex flex-wrap flex-1 items-center gap-x-2 sm:flex-initial"> <li class="flex"> <a class="inline-block p-1 sm:hover:text-accent" href="https://github.com/SimsalYang" target="_blank" rel="noopener noreferrer" title="Github"> <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" class="h-5 w-5" astro-icon="mdi:github"><path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z"/></svg> <span class="sr-only">Github</span> </a> </li><li class="flex"> <a class="inline-block p-1 sm:hover:text-accent" href="/rss.xml" target="_blank" rel="noopener noreferrer" title="rss"> <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false" class="h-5 w-5" astro-icon="mdi:rss"><path fill="currentColor" d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20 5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/></svg> <span class="sr-only">rss</span> </a> </li> </ul> </div> <span class="!my-4 text-accent" aria-hidden>---</span> <p>  </p> <div class="pt-2 hidden md:block"> <span>Part of series: </span> <br> <ul> <li><a class="cody-link" href="/series/tech">tech</a></li> </ul> </div> </div> <nav class="sticky top-20 order-2 hidden basis-64 lg:block"> <hr> <h2 class="font-bold text-lg">Table of Contents</h2> <ul class="-me-32" id="toc"> <li data-astro-cid-zekvapgs> <a href="#安装-docker-先决条件" id="toc-安装-docker-先决条件" data-astro-cid-zekvapgs> 安装 Docker 先决条件 </a>  </li> <li data-astro-cid-zekvapgs> <a href="#在-ubuntu-和-debian-中安装-docker" id="toc-在-ubuntu-和-debian-中安装-docker" data-astro-cid-zekvapgs> 在 Ubuntu 和 Debian 中安装 Docker </a>  </li> <li data-astro-cid-zekvapgs> <a href="#docker-常用命令" id="toc-docker-常用命令" data-astro-cid-zekvapgs> docker 常用命令 </a>  </li> <li data-astro-cid-zekvapgs> <a href="#dockerfile-文件" id="toc-dockerfile-文件" data-astro-cid-zekvapgs> Dockerfile 文件 </a>  </li> <li data-astro-cid-zekvapgs> <a href="#docker-安装-mysql-及-通过-nodejs-连接数据库" id="toc-docker-安装-mysql-及-通过-nodejs-连接数据库" data-astro-cid-zekvapgs> docker 安装 mysql 及 通过 nodejs 连接数据库 </a>  </li> <li data-astro-cid-zekvapgs> <a href="#docker-无法打开端口" id="toc-docker-无法打开端口" data-astro-cid-zekvapgs> docker 无法打开端口 </a>  </li> <li data-astro-cid-zekvapgs> <a href="#docker-安装-jupyter-镜像容器" id="toc-docker-安装-jupyter-镜像容器" data-astro-cid-zekvapgs> docker 安装 jupyter 镜像容器 </a>  </li> <li data-astro-cid-zekvapgs> <a href="#docker-部署-mongodb" id="toc-docker-部署-mongodb" data-astro-cid-zekvapgs> docker 部署 mongodb </a>  </li> <li data-astro-cid-zekvapgs> <a href="#docker--wordpress-微服务" id="toc-docker--wordpress-微服务" data-astro-cid-zekvapgs> Docker + WordPress 微服务 </a>  </li> <li data-astro-cid-zekvapgs> <a href="#docker-compose" id="toc-docker-compose" data-astro-cid-zekvapgs> Docker Compose </a>  </li> <li data-astro-cid-zekvapgs> <a href="#mysql-网页客户端-docker-容器---adminer" id="toc-mysql-网页客户端-docker-容器---adminer" data-astro-cid-zekvapgs> MySQL 网页客户端 Docker 容器 - Adminer </a>  </li>  </ul> </nav>  </aside> </main> <footer class="mt-auto flex w-full flex-col items-center justify-center gap-y-2 pb-4 pt-20 text-center align-top font-semibold sm:flex-row sm:justify-between sm:text-xs text-textColor mb-8"> <div class="mr-2 sm:mr-0">
Copyright &copy; 2024  Simon Y. </div> <nav aria-label="More on this site" class="gap-x-0 sm:gap-x-2 sm:flex sm:divide-x sm:divide-accent"> <a href="/" class="px-2 py-0 hover:text-textColor hover:underline sm:px-4 sm:py-2"> Home </a><a href="/blog" class="px-2 py-0 hover:text-textColor hover:underline sm:px-4 sm:py-2"> Blog </a><a href="/books" class="px-2 py-0 hover:text-textColor hover:underline sm:px-4 sm:py-2"> Books </a><a href="/archive" class="px-2 py-0 hover:text-textColor hover:underline sm:px-4 sm:py-2"> Archive </a><a href="/about" class="px-2 py-0 hover:text-textColor hover:underline sm:px-4 sm:py-2"> About </a> </nav> </footer>
</html</body></html> 